<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>昌久个人博客</title>
  
  <subtitle>我是子标题不知道说啥</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://githubbycj.github.io/"/>
  <updated>2020-06-28T15:12:05.456Z</updated>
  <id>https://githubbycj.github.io/</id>
  
  <author>
    <name>昌久</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>CentOS7下安装FastDFS</title>
    <link href="https://githubbycj.github.io/2020/06/26/fastdfs-install/"/>
    <id>https://githubbycj.github.io/2020/06/26/fastdfs-install/</id>
    <published>2020-06-26T05:28:03.000Z</published>
    <updated>2020-06-28T15:12:05.456Z</updated>
    
    <content type="html"><![CDATA[<h2 id="应用场景"><a href="#应用场景" class="headerlink" title="应用场景"></a>应用场景</h2><p>当使用springcloud 微服务实现负载均衡时，遇到文件上传获取的难题，这时可以将文件放到FastDFS 服务上，只需要保存FastDFS返回的文件key 就好。</p><h2 id="下载FastDFS安装依赖包"><a href="#下载FastDFS安装依赖包" class="headerlink" title="下载FastDFS安装依赖包"></a>下载FastDFS安装依赖包</h2><p>有兴趣可以去<a href="https://github.com/happyfish100" target="_blank" rel="noopener">作者大佬的博客</a>看看,给个Star啥的。<br><a href="https://github.com/happyfish100/fastdfs/archive/V6.06.tar.gz" target="_blank" rel="noopener">fastdfs-6.06.tar.gz</a><br><a href="https://github.com/happyfish100/libfastcommon/archive/V1.0.43.tar.gz" target="_blank" rel="noopener">libfastcommon-1.0.43.tar.gz</a><br><a href="https://github.com/happyfish100/fastdfs-nginx-module/archive/V1.22.tar.gz" target="_blank" rel="noopener">fastdfs-nginx-module-1.22.tar.gz</a></p><p><strong>下载命令</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># 安装编译依赖</span></span><br><span class="line">yum -y install gcc </span><br><span class="line">yum -y install gcc-c++</span><br><span class="line"></span><br><span class="line"><span class="comment"># 进入/opt 文件夹</span></span><br><span class="line"><span class="built_in">cd</span> /opt</span><br><span class="line"><span class="comment"># 创建文件夹 softwares</span></span><br><span class="line">mkdir softwares </span><br><span class="line"><span class="comment"># 进入softwares </span></span><br><span class="line"><span class="built_in">cd</span> softwares</span><br><span class="line"><span class="comment"># 下载fastdfs依赖文件</span></span><br><span class="line">wget -O fastdfs-6.06.tar.gz https://github.com/happyfish100/fastdfs/archive/V6.06.tar.gz</span><br><span class="line">wget -O libfastcommon-1.0.43.tar.gz https://github.com/happyfish100/libfastcommon/archive/V1.0.43.tar.gz</span><br><span class="line">wget -O fastdfs-nginx-module-1.22.tar.gz https://github.com/happyfish100/fastdfs-nginx-module/archive/V1.22.tar.gz</span><br></pre></td></tr></table></figure><p>访问时依赖nginx 所以也要下载nginx<br><a href="http://nginx.org/en/download.html" target="_blank" rel="noopener">nginx 官网</a></p><h2 id="安装并配置"><a href="#安装并配置" class="headerlink" title="安装并配置"></a>安装并配置</h2><p>安装是有顺序的，先安装 libfastcommon再安装 fastdfs， 如果有需要用到nginx，就先安装nginx，再配置fastdfs-nginx-module 包</p><h3 id="安装libfastcommon"><a href="#安装libfastcommon" class="headerlink" title="安装libfastcommon"></a>安装libfastcommon</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 进入 /opt/softwares文件夹</span></span><br><span class="line"><span class="built_in">cd</span> /opt/softwares</span><br><span class="line"></span><br><span class="line"><span class="comment"># 解压 libfastcommon-1.0.43.tar.gz </span></span><br><span class="line">tar -zxvf libfastcommon-1.0.43.tar.gz</span><br><span class="line"><span class="comment"># 进入解压好的文件夹里面</span></span><br><span class="line"><span class="built_in">cd</span> libfastcommon-1.0.43/</span><br><span class="line"><span class="comment"># 运行make.sh编译 </span></span><br><span class="line">./make.sh</span><br><span class="line"><span class="comment"># 安装</span></span><br><span class="line">./make.sh install</span><br></pre></td></tr></table></figure><h3 id="安装fastdfs"><a href="#安装fastdfs" class="headerlink" title="安装fastdfs"></a>安装fastdfs</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 进入 /opt/softwares文件夹</span></span><br><span class="line"><span class="built_in">cd</span> /opt/softwares</span><br><span class="line"><span class="comment"># 解压</span></span><br><span class="line">tar -zxvf fastdfs-6.06.tar.gz</span><br><span class="line"><span class="comment"># 进入解压好的文件夹里面</span></span><br><span class="line"><span class="built_in">cd</span> fastdfs-6.06</span><br><span class="line"><span class="comment"># 运行make.sh编译 </span></span><br><span class="line">./make.sh</span><br><span class="line"><span class="comment"># 安装</span></span><br><span class="line">./make.sh install</span><br></pre></td></tr></table></figure><h3 id="配置fastdfs"><a href="#配置fastdfs" class="headerlink" title="配置fastdfs"></a>配置fastdfs</h3><h4 id="创建数据文件夹"><a href="#创建数据文件夹" class="headerlink" title="创建数据文件夹"></a>创建数据文件夹</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建tracker 日志和数据文件存放的地址</span></span><br><span class="line">mkdir -p /data/fastdfs/tracker</span><br><span class="line"><span class="comment"># 创建storage 日志和数据文件存放的地址</span></span><br><span class="line">mkdir -p /data/fastdfs/storage</span><br><span class="line"><span class="comment"># 数据存放在store0 文件夹上</span></span><br><span class="line">mkdir -p /data/fastdfs/storage/store0</span><br></pre></td></tr></table></figure><h4 id="配置tracker-conf"><a href="#配置tracker-conf" class="headerlink" title="配置tracker.conf"></a>配置tracker.conf</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 进入fastdfs 配置文件目录</span></span><br><span class="line"><span class="built_in">cd</span> /etc/fdfs </span><br><span class="line"><span class="comment"># 查看配置文件</span></span><br><span class="line">ls -lh</span><br><span class="line"><span class="comment"># 备份tracker.conf </span></span><br><span class="line">cp tracker.conf.sample tracker.conf</span><br><span class="line"><span class="comment"># 编辑tracker.conf</span></span><br><span class="line">vi tracker.conf</span><br><span class="line"><span class="comment"># 配置 bash_path = /data/fastdfs/tracker</span></span><br></pre></td></tr></table></figure><h4 id="配置storage-conf-和-storage-ids-conf"><a href="#配置storage-conf-和-storage-ids-conf" class="headerlink" title="配置storage.conf 和 storage_ids.conf"></a>配置storage.conf 和 storage_ids.conf</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment"># 进入fastdfs 配置文件目录</span></span><br><span class="line"><span class="built_in">cd</span> /etc/fdfs </span><br><span class="line"><span class="comment"># 查看配置文件</span></span><br><span class="line">ls -lh</span><br><span class="line"><span class="comment"># 备份storage.conf</span></span><br><span class="line">cp storage.conf.sample storage.conf</span><br><span class="line"><span class="comment"># 编辑storage.conf</span></span><br><span class="line">vi storage.conf</span><br><span class="line"><span class="comment"># group_name = group1 这里可以自定义group名称</span></span><br><span class="line"><span class="comment"># base_path = /data/fastdfs/storage 配置storage基础路径</span></span><br><span class="line"><span class="comment"># store_path = /data/fastdfs/storage/store0 配置数据存放路径</span></span><br><span class="line"><span class="comment"># tracker_server = 192.168.3.12:22122  这里不能写成127.0.0.1 ，由于只有一台tracker 服务所以写本机ip 就好了</span></span><br><span class="line"><span class="comment"># 备份storage_ids.conf</span></span><br><span class="line">cp storage_ids.conf.sample storage_ids.conf</span><br><span class="line"><span class="comment"># 编辑 storage_ids.conf</span></span><br><span class="line">vi storage_ids.conf</span><br><span class="line"><span class="comment"># 100001   group1  192.168.3.12 由于只有一个group1 所以保留一个，改成本机ip地址就好</span></span><br></pre></td></tr></table></figure><h2 id="启动服务"><a href="#启动服务" class="headerlink" title="启动服务"></a>启动服务</h2><p>启动服务在<code>/etc/init.d</code>下</p><h3 id="启动tracker服务"><a href="#启动tracker服务" class="headerlink" title="启动tracker服务"></a>启动tracker服务</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 进入/etc/init.d</span></span><br><span class="line"><span class="built_in">cd</span> /etc/init.d</span><br><span class="line"><span class="comment"># 指定配置 文件启动 ， 可以不指定它会默认去找  tracker.conf</span></span><br><span class="line">./fdfs_trackerd start  /etc/fdfs/tracker.conf</span><br></pre></td></tr></table></figure><h3 id="启动storage服务"><a href="#启动storage服务" class="headerlink" title="启动storage服务"></a>启动storage服务</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 进入/etc/init.d</span></span><br><span class="line"><span class="built_in">cd</span> /etc/init.d</span><br><span class="line"><span class="comment"># 指定配置 文件启动 ， 可以不指定它会默认去找  storage.conf</span></span><br><span class="line">./fdfs_storaged start /etc/sdfs/storage.conf </span><br><span class="line"><span class="comment"># 如果想在本机启动多个storage 可以复制多个storage.conf 改变名字和里面配置的端口参数,</span></span><br><span class="line"><span class="comment"># 然后通过指定配置文件启动的方式启动多个storage服务</span></span><br><span class="line"><span class="comment"># 比如 ./fdfs_storaged start /etc/sdfs/storage1.conf </span></span><br><span class="line"><span class="comment"># ./fdfs_storaged start /etc/sdfs/storage2.conf 等，启动多个storage</span></span><br></pre></td></tr></table></figure><h2 id="安装nginx"><a href="#安装nginx" class="headerlink" title="安装nginx"></a>安装nginx</h2><h3 id="先安装nginx-依赖包"><a href="#先安装nginx-依赖包" class="headerlink" title="先安装nginx 依赖包"></a>先安装nginx 依赖包</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum install -y pcre pcre-devel</span><br><span class="line">yum install -y zlib zlib-devel</span><br><span class="line">yum install -y openssl openssl-devel</span><br></pre></td></tr></table></figure><h3 id="下载nginx并解压"><a href="#下载nginx并解压" class="headerlink" title="下载nginx并解压"></a>下载nginx并解压</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /opt/softwares/</span><br><span class="line">wget -c https://nginx.org/download/nginx-1.16.1.tar.gz</span><br><span class="line">tar -zxvf nginx-1.16.1.tar.gz</span><br></pre></td></tr></table></figure><h3 id="配置并安装nginx"><a href="#配置并安装nginx" class="headerlink" title="配置并安装nginx"></a>配置并安装nginx</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 进入解压后的目录</span></span><br><span class="line"><span class="built_in">cd</span> nginx-1.16.1 </span><br><span class="line"><span class="comment"># 执行默认配置</span></span><br><span class="line">./configure</span><br><span class="line"><span class="comment"># 编译</span></span><br><span class="line">make</span><br><span class="line"><span class="comment"># 安装</span></span><br><span class="line">make install</span><br><span class="line"><span class="comment"># 可以使用&amp;&amp; 符号连起来一起运行  make &amp;&amp; make install</span></span><br></pre></td></tr></table></figure><h3 id="启动nginx"><a href="#启动nginx" class="headerlink" title="启动nginx"></a>启动nginx</h3><p>nginx 安装路径在 <code>/usr/local/nginx</code> ，配置文件在conf 文件夹上</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 启动nginx </span></span><br><span class="line">/usr/<span class="built_in">local</span>/nginx/sbin/nginx</span><br></pre></td></tr></table></figure><p>nginx 常用命令说明<br>| 命令 | 说明 |<br>| – | – |<br>| nginx -s stop | 停止 |<br>| nginx -s quit | 退出 |<br>| nginx -s reload | 重新读取配置并启动 |</p><h2 id="配置FastDFS-的Nginx-模块"><a href="#配置FastDFS-的Nginx-模块" class="headerlink" title="配置FastDFS 的Nginx 模块"></a>配置FastDFS 的Nginx 模块</h2><h3 id="解压-fastdfs-nginx-模块"><a href="#解压-fastdfs-nginx-模块" class="headerlink" title="解压 fastdfs-nginx 模块"></a>解压 fastdfs-nginx 模块</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf  fastdfs-nginx-module-1.22.tar.gz</span><br></pre></td></tr></table></figure><h3 id="配置nginx"><a href="#配置nginx" class="headerlink" title="配置nginx"></a>配置nginx</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 如果启动了nginx ，先停止nginx </span></span><br><span class="line">/usr/<span class="built_in">local</span>/nginx/sbin/nginx -s quit</span><br><span class="line"></span><br><span class="line"><span class="comment"># 进入刚刚解压的nginx 目录</span></span><br><span class="line"><span class="built_in">cd</span> /opt/softwares/nginx-1.16.1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加fastdfs-nginx模块到nginx </span></span><br><span class="line">./configure --add-module=../fastdfs-nginx-module-1.22/src</span><br><span class="line"><span class="comment"># 重新编译安装nginx</span></span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure><h3 id="查看是否安装fastdfs-nginx"><a href="#查看是否安装fastdfs-nginx" class="headerlink" title="查看是否安装fastdfs-nginx"></a>查看是否安装fastdfs-nginx</h3><p>如果出现 configure arguments: –add-module=../fastdfs-nginx-module-1.22/src 说明配置成功了</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/<span class="built_in">local</span>/nginx/sbin/nginx -V</span><br></pre></td></tr></table></figure><h3 id="编辑mod-fastdfs-conf配置文件"><a href="#编辑mod-fastdfs-conf配置文件" class="headerlink" title="编辑mod_fastdfs.conf配置文件"></a>编辑mod_fastdfs.conf配置文件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 进入/opt/softwares/fastdfs-nginx-module-1.22/src</span></span><br><span class="line"><span class="built_in">cd</span> /opt/softwares/fastdfs-nginx-module-1.22/src</span><br><span class="line"></span><br><span class="line"><span class="comment"># 复制  mod_fastdfs.conf 到 /etc/fdfs 目录上</span></span><br><span class="line">cp mod_fastdfs.conf /etc/fdfs/</span><br><span class="line"></span><br><span class="line"><span class="comment"># 进入fastdfs-6.06/conf 解压目录下</span></span><br><span class="line"><span class="built_in">cd</span> /opt/softwares/fastdfs-6.06/conf</span><br><span class="line"><span class="comment"># 复制  anti-steal.jpg http.conf mime.types 到 /etc/fdfs/上</span></span><br><span class="line">cp anti-steal.jpg http.conf mime.types /etc/fdfs/</span><br><span class="line"></span><br><span class="line"><span class="comment"># 编辑 mod_fastdfs.conf </span></span><br><span class="line">vim /etc/fdfs/mod_fastdfs.conf</span><br></pre></td></tr></table></figure><p>mod_fastdfs.conf 修改内容</p><blockquote><p>#配置tracker_server 服务器地址<br>tracker_server=192.168.3.12:22122<br>#需要和storage.conf 一致<br>store_path0=/data/fastdfs/storage/store0<br>#如果地址中包含group 前缀需要设置为true<br>url_have_group_name=true</p></blockquote><h3 id="编辑nginx-conf-配置文件"><a href="#编辑nginx-conf-配置文件" class="headerlink" title="编辑nginx.conf 配置文件"></a>编辑nginx.conf 配置文件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /usr/loca/nginx/conf/nginx.conf</span><br></pre></td></tr></table></figure><blockquote><p>#在server 下面新增<br>#如果只有一个group1 配置<br>location ~/group1/M00 {<br>    ngx_fastdfs_module;<br>}<br>#如果多个group可以使用正则,配置多个group 的时候用到<br>location ~/group([0-9])/M00 {<br>   ngx_fastdfs_module;<br>}</p></blockquote><h3 id="启动nginx-1"><a href="#启动nginx-1" class="headerlink" title="启动nginx"></a>启动nginx</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/<span class="built_in">local</span>/nginx/sbin/nginx</span><br></pre></td></tr></table></figure><h2 id="查看服务是否启动"><a href="#查看服务是否启动" class="headerlink" title="查看服务是否启动"></a>查看服务是否启动</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看是否启动</span></span><br><span class="line">ps aux | grep fdfs </span><br><span class="line"><span class="comment"># 查看tracker端口是否正常</span></span><br><span class="line">netstat -tlnp | grep 22122 </span><br><span class="line"><span class="comment"># 查看storage 端口是否正常</span></span><br><span class="line">netstat -tlnp | grep 23000</span><br><span class="line"><span class="comment"># 查看nginx 端口是否正常</span></span><br><span class="line">netstat -tlnp | grep 80</span><br></pre></td></tr></table></figure><h2 id="上传使用方式"><a href="#上传使用方式" class="headerlink" title="上传使用方式"></a>上传使用方式</h2><p><a href="">JAVA 示例</a><br><a href="">C# 示例</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;应用场景&quot;&gt;&lt;a href=&quot;#应用场景&quot; class=&quot;headerlink&quot; title=&quot;应用场景&quot;&gt;&lt;/a&gt;应用场景&lt;/h2&gt;&lt;p&gt;当使用springcloud 微服务实现负载均衡时，遇到文件上传获取的难题，这时可以将文件放到FastDFS 服务上，只需要
      
    
    </summary>
    
    
    
      <category term="linux" scheme="https://githubbycj.github.io/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>window 安装FreeSSHD 实现与linux 文件互传</title>
    <link href="https://githubbycj.github.io/2020/06/25/freesshd-install/"/>
    <id>https://githubbycj.github.io/2020/06/25/freesshd-install/</id>
    <published>2020-06-25T13:56:01.000Z</published>
    <updated>2020-06-26T04:40:58.723Z</updated>
    
    <content type="html"><![CDATA[<h2 id="应用场景"><a href="#应用场景" class="headerlink" title="应用场景"></a>应用场景</h2><p>在搭建 Windows Server 服务器时有时候需要在linux 系统上直接发送文件或者通过终端直接链接过来， 所以需要windows 系统支持ssh 。</p><h2 id="下载FreeSSHD"><a href="#下载FreeSSHD" class="headerlink" title="下载FreeSSHD"></a>下载FreeSSHD</h2><p>下载地址<code>http://www.freesshd.com/?ctt=download</code> 下载<a href="http://www.freesshd.com/freeSSHd.exe" target="_blank" rel="noopener">freeSSHd.exe</a></p><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>双击运行<code>freeSSHd.exe</code> 然后一直next 直至完成就好了。</p><h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><p>在桌面双击FreeSSHd快捷方式， 然后在右下角找到启动的FreeSSHd启动程序，并打开它。</p><h3 id="设置登陆用户"><a href="#设置登陆用户" class="headerlink" title="设置登陆用户"></a>设置登陆用户</h3><p>点击Users 的Tab 页如图：<br><img src="/images/archives/freesshd-install-img01.png" alt="alt freesshd01"><br>添加登陆用户<br><img src="/images/archives/freesshd-install-img02.png" alt="alt freesshd02"><br>这里我配置了两个可以登陆的用户，一个使用windows 授权方式登陆，一个是我自定义的root 账号<br><img src="/images/archives/freesshd-install-img03.png" alt="alt freesshd03"><br><img src="/images/archives/freesshd-install-img04.png" alt="alt freesshd03"></p><h3 id="配置日志监听"><a href="#配置日志监听" class="headerlink" title="配置日志监听"></a>配置日志监听</h3><p>点击Logging 的Tab页如图:<br>配置日志输入<br><img src="/images/archives/freesshd-install-img05.png" alt="alt freesshd03"><br>设置好点击应用即可</p><h3 id="配置登陆授权方式"><a href="#配置登陆授权方式" class="headerlink" title="配置登陆授权方式"></a>配置登陆授权方式</h3><p>点击 Authentication 的Tab页如图：<br><img src="/images/archives/freesshd-install-img06.png" alt="alt freesshd03"><br>设置好点击应用即可</p><h3 id="配置SSH-信息"><a href="#配置SSH-信息" class="headerlink" title="配置SSH 信息"></a>配置SSH 信息</h3><p>点击SSH的Tab 页如图：<br><img src="/images/archives/freesshd-install-img07.png" alt="alt freesshd03"><br>设置好点击应用即可<br>根据设置的端口去防火墙入站规则设置开启， 我这里用的是默认22 端口。</p><h3 id="配置SFTP-上传文件路径"><a href="#配置SFTP-上传文件路径" class="headerlink" title="配置SFTP 上传文件路径"></a>配置SFTP 上传文件路径</h3><p>点击SFTP的Tab 页如图：<br><img src="/images/archives/freesshd-install-img08.png" alt="alt freesshd03"></p><h2 id="开启服务"><a href="#开启服务" class="headerlink" title="开启服务"></a>开启服务</h2><p>打开cmd 命令行输入命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 重新启动 FreeSSHDService服务</span></span><br><span class="line">net stop FreeSSHDService</span><br><span class="line">net start FreeSSHDService</span><br></pre></td></tr></table></figure><p>或者打开services.msc找到windows服务FreeSSHDService点击重新启动就好如图：<br><img src="/images/archives/freesshd-install-img10.png" alt="alt freesshd03"></p><h2 id="测试是否链接成功"><a href="#测试是否链接成功" class="headerlink" title="测试是否链接成功"></a>测试是否链接成功</h2><p>使用putty 的ssh 方式链接或者在 linux 系统上直接使用ssh 链接和发送文件测试就好。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;应用场景&quot;&gt;&lt;a href=&quot;#应用场景&quot; class=&quot;headerlink&quot; title=&quot;应用场景&quot;&gt;&lt;/a&gt;应用场景&lt;/h2&gt;&lt;p&gt;在搭建 Windows Server 服务器时有时候需要在linux 系统上直接发送文件或者通过终端直接链接过来， 所以需要
      
    
    </summary>
    
    
    
      <category term="windows" scheme="https://githubbycj.github.io/tags/windows/"/>
    
  </entry>
  
  <entry>
    <title>使用Putty 链接 linux 系统</title>
    <link href="https://githubbycj.github.io/2020/06/22/use-putty/"/>
    <id>https://githubbycj.github.io/2020/06/22/use-putty/</id>
    <published>2020-06-22T14:47:05.000Z</published>
    <updated>2020-06-26T06:21:00.033Z</updated>
    
    <content type="html"><![CDATA[<h2 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h2><p>使用putty 轻量级ssh 软件链接 linux shell 终端和互传文件。</p><h2 id="下载文件"><a href="#下载文件" class="headerlink" title="下载文件"></a>下载文件</h2><p><a href="https://www.chiark.greenend.org.uk/~sgtatham/putty/latest.html" target="_blank" rel="noopener">下载 putty 软件 </a><br>按照自己电脑的操作系统下载 ，可以下载  <code>putty-64bit-0.73-installer.msi</code> 安装使用，也可以直接下载<code>putty.zip</code> 解压直接使用， 由于本人不想安装直接下载<code>putty.zip</code> 文件。 下载后解压即可。<br>解压后如图：<br><img src="/images/archives/putty-list.png" alt="alt puttylist"></p><h2 id="使用PUTTY-EXE链接终端"><a href="#使用PUTTY-EXE链接终端" class="headerlink" title="使用PUTTY.EXE链接终端"></a>使用PUTTY.EXE链接终端</h2><p>双击打开PUTTY.EXE录入ip 地址和端口然后点击open 打开终端输入用户名和密码即可<br>如图：<br><img src="/images/archives/putty-exe.png" alt="alt putty-exe"></p><h2 id="使用PSCP-EXE传输文件"><a href="#使用PSCP-EXE传输文件" class="headerlink" title="使用PSCP.EXE传输文件"></a>使用PSCP.EXE传输文件</h2><p>打开cmd 命令， cd 定位到PSCP.EXE的文件夹上</p><p><strong>上传命令</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># scp 当前windows 文件  linux用户名@IP地址:/上传目录</span></span><br><span class="line"><span class="comment"># 示例 将 test.txt 上传到linux /opt 文件夹上</span></span><br><span class="line">scp D:\\test.txt root@192.168.3.12:/opt</span><br></pre></td></tr></table></figure><p><strong>下载命令</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># scp  linux用户名@IP地址:/文件地址 windows 下载目录</span></span><br><span class="line"><span class="comment"># 示例 将 linux 上的test.txt下载到当前D盘</span></span><br><span class="line">scp root@192.168.3.12:/opt/test.txt D:\\</span><br></pre></td></tr></table></figure><p>//todo 其余参数解释和使用待补充</p><h2 id="使用PSFTP-EXE传输文件"><a href="#使用PSFTP-EXE传输文件" class="headerlink" title="使用PSFTP.EXE传输文件"></a>使用PSFTP.EXE传输文件</h2><p>双击打开PSFTP.EXE 文件<br><strong>输入命令</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># open ip 地址 回车 然后输入用户名和密码登陆</span></span><br><span class="line">open 192.168.3.12</span><br><span class="line"><span class="comment"># cd /opt 切换到指定的操作目录</span></span><br><span class="line"><span class="built_in">cd</span> /opt</span><br><span class="line"><span class="comment"># lcd d:\\ 切换本地windows操作的目录</span></span><br><span class="line">lcd D:\\</span><br><span class="line"><span class="comment"># put 上传文件名</span></span><br><span class="line">put test.txt</span><br><span class="line"><span class="comment"># get 下载文件名</span></span><br><span class="line">get test2.txt</span><br></pre></td></tr></table></figure><p>//todo 其余参数解释和使用待补充</p><h2 id="配置环境变量"><a href="#配置环境变量" class="headerlink" title="配置环境变量"></a>配置环境变量</h2><ol><li>为方便配置环境变量打开<code>控制面板\系统和安全\系统</code>打开高级系统设置点击环境变量</li><li>点击新建环境变量</li><li>变量名<code>PUTTY_HOME</code>, 变量值是putty 文件的目录比如我的：<code>S:\softwares\common\putty</code></li><li>在path系统变量后面追加 <code>;%PUTTY_HOME%</code></li><li>重新打开cmd 就可以在任意目录访问scp， putty，psftp 等命令了。 方便文件直接上传下载</li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;说明&quot;&gt;&lt;a href=&quot;#说明&quot; class=&quot;headerlink&quot; title=&quot;说明&quot;&gt;&lt;/a&gt;说明&lt;/h2&gt;&lt;p&gt;使用putty 轻量级ssh 软件链接 linux shell 终端和互传文件。&lt;/p&gt;
&lt;h2 id=&quot;下载文件&quot;&gt;&lt;a href=&quot;#下
      
    
    </summary>
    
    
    
      <category term="windows" scheme="https://githubbycj.github.io/tags/windows/"/>
    
  </entry>
  
  <entry>
    <title>springmvc整合百度ueditor富文本编辑器</title>
    <link href="https://githubbycj.github.io/2020/06/18/springmvc-merge-ueditor/"/>
    <id>https://githubbycj.github.io/2020/06/18/springmvc-merge-ueditor/</id>
    <published>2020-06-18T12:27:17.000Z</published>
    <updated>2020-06-18T15:55:45.952Z</updated>
    
    <content type="html"><![CDATA[<h1 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h1><p>springmvc 页面整合百度ueditor 富文本编辑器， 使用spring自带的上传组件，替换掉ueditor 自带的jsp 上传组件， 下载<a href="http://ueditor.baidu.com/website/download.html" target="_blank" rel="noopener">ueditor</a>， 下载jsp 版本utf-8 格式的好了</p><h2 id="步骤一-搭建项目"><a href="#步骤一-搭建项目" class="headerlink" title="步骤一 搭建项目"></a>步骤一 搭建项目</h2><p>这里我为了方便使用了springboot 项目，在<code>resource/static/</code>文件夹下创建文件夹ueditor，<br>然后解压下载好的ueditor1_4_3_3-utf8-jsp.zip文件， 将文件内容复制到ueditor 目录下，<br>如图：<br><img src="/images/archives/springmvc-merge-ueditor-img01.png" alt="alt 文件"></p><h2 id="步骤二-编辑上传配置以及代码"><a href="#步骤二-编辑上传配置以及代码" class="headerlink" title="步骤二 编辑上传配置以及代码"></a>步骤二 编辑上传配置以及代码</h2><p>修改配置文件 ueditor.config.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 编辑器资源文件根路径。它所表示的含义是：以编辑器实例化页面为当前路径，指向编辑器资源文件（即dialog等文件夹）的路径。</span></span><br><span class="line"><span class="comment">     * 鉴于很多同学在使用编辑器的时候出现的种种路径问题，此处强烈建议大家使用"相对于网站根目录的相对路径"进行配置。</span></span><br><span class="line"><span class="comment">     * "相对于网站根目录的相对路径"也就是以斜杠开头的形如"/myProject/ueditor/"这样的路径。</span></span><br><span class="line"><span class="comment">     * 如果站点中有多个不在同一层级的页面需要实例化编辑器，且引用了同一UEditor的时候，此处的URL可能不适用于每个页面的编辑器。</span></span><br><span class="line"><span class="comment">     * 因此，UEditor提供了针对不同页面的编辑器可单独配置的根路径，具体来说，在需要实例化编辑器的页面最顶部写上如下代码即可。当然，需要令此处的URL等于对应的配置。</span></span><br><span class="line"><span class="comment">     * window.UEDITOR_HOME_URL = "/xxxx/xxxx/";</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">var</span> URL = <span class="built_in">window</span>.UEDITOR_HOME_URL || getUEBasePath();</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 配置项主体。注意，此处所有涉及到路径的配置别遗漏URL变量。</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="built_in">window</span>.UEDITOR_CONFIG = &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//为编辑器实例添加一个路径，这个不能被注释</span></span><br><span class="line">        UEDITOR_HOME_URL: URL</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 服务器统一请求接口路径</span></span><br><span class="line">        <span class="comment">// , serverUrl: URL + "jsp/controller.jsp"  将这里改成下面的代码</span></span><br><span class="line">        , <span class="attr">serverUrl</span>: URL + <span class="string">"/ueditor"</span></span><br><span class="line"><span class="comment">// ...... 省略下面的代码</span></span><br></pre></td></tr></table></figure><p>新建<code>UEditorController.java</code>类 用户替换 ueditor自带的jsp 类上传组件</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/ueditor"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UEditorController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Value</span>(<span class="string">"$&#123;ueditor.imagepath&#125;"</span>)</span><br><span class="line"><span class="keyword">private</span> String imageUploadPath;</span><br><span class="line"><span class="meta">@Value</span>(<span class="string">"$&#123;ueditor.videopath&#125;"</span>)</span><br><span class="line"><span class="keyword">private</span> String videoUploadPath;</span><br><span class="line"><span class="meta">@Value</span>(<span class="string">"$&#123;ueditor.filepath&#125;"</span>)</span><br><span class="line"><span class="keyword">private</span> String fileUploadPath;</span><br><span class="line"><span class="meta">@Value</span>(<span class="string">"$&#123;spring.profiles.active&#125;"</span>)</span><br><span class="line"><span class="keyword">private</span> List&lt;String&gt; active;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RequestMapping</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Object <span class="title">index</span><span class="params">(String action, HttpServletRequest request, Integer start, Integer size)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">null</span> == action)</span><br><span class="line"><span class="keyword">return</span> config();</span><br><span class="line">MultipartHttpServletRequest multipartHttpServletRequest = <span class="keyword">null</span>;</span><br><span class="line">MultipartFile upfile;</span><br><span class="line"><span class="keyword">if</span> (request <span class="keyword">instanceof</span> MultipartHttpServletRequest) &#123;</span><br><span class="line">multipartHttpServletRequest = (MultipartHttpServletRequest) request;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">switch</span> (action) &#123;</span><br><span class="line"><span class="keyword">case</span> <span class="string">"config"</span>: <span class="comment">// 配置获取</span></span><br><span class="line"><span class="keyword">return</span> config();</span><br><span class="line"><span class="keyword">case</span> <span class="string">"uploadimage"</span>: <span class="comment">// 图片上传</span></span><br><span class="line">upfile = multipartHttpServletRequest.getFile(<span class="string">"upfile"</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">this</span>.upfile(upfile, <span class="string">"image"</span>, <span class="keyword">this</span>.imageUploadPath);</span><br><span class="line"><span class="keyword">case</span> <span class="string">"uploadvideo"</span>: <span class="comment">// 视频上传</span></span><br><span class="line">upfile = multipartHttpServletRequest.getFile(<span class="string">"upfile"</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">this</span>.upfile(upfile, <span class="string">"video"</span>, <span class="keyword">this</span>.videoUploadPath);</span><br><span class="line"><span class="keyword">case</span> <span class="string">"uploadfile"</span>: <span class="comment">// 附件上传</span></span><br><span class="line">upfile = multipartHttpServletRequest.getFile(<span class="string">"upfile"</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">this</span>.upfile(upfile, <span class="string">"file"</span>, <span class="keyword">this</span>.fileUploadPath);</span><br><span class="line"><span class="keyword">case</span> <span class="string">"uploadscrawl"</span>: <span class="comment">// 涂鸦上传</span></span><br><span class="line"><span class="keyword">return</span> uploadscrawl(request.getParameter(<span class="string">"upfile"</span>));</span><br><span class="line"><span class="keyword">case</span> <span class="string">"listimage"</span>: <span class="comment">// 在线图片获取</span></span><br><span class="line"><span class="keyword">return</span> <span class="keyword">this</span>.resources(<span class="keyword">this</span>.imageUploadPath, start, size);</span><br><span class="line"><span class="keyword">case</span> <span class="string">"listfile"</span>: <span class="comment">// 在线文件获取</span></span><br><span class="line"><span class="keyword">return</span> <span class="keyword">this</span>.resources(<span class="keyword">this</span>.fileUploadPath, start, size);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 显示图片</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> ymd</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> imgname</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> response</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/image/&#123;ymd&#125;/&#123;imgname&#125;"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">image</span><span class="params">(@PathVariable(<span class="string">"ymd"</span>)</span> String ymd, @<span class="title">PathVariable</span><span class="params">(<span class="string">"imgname"</span>)</span> String imgname,</span></span><br><span class="line"><span class="function">HttpServletResponse response) <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line"><span class="keyword">this</span>.responsefile(<span class="keyword">this</span>.imageUploadPath, ymd, imgname, response);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 显示 视频</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> ymd</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> videoname</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> response</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/video/&#123;ymd&#125;/&#123;videoname&#125;"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">video</span><span class="params">(@PathVariable(<span class="string">"ymd"</span>)</span> String ymd, @<span class="title">PathVariable</span><span class="params">(<span class="string">"videoname"</span>)</span> String videoname,</span></span><br><span class="line"><span class="function">HttpServletResponse response) <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line"><span class="keyword">this</span>.responsefile(<span class="keyword">this</span>.videoUploadPath, ymd, videoname, response);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 文件响应</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> ymd</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> filename</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> response</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/file/&#123;ymd&#125;/&#123;filename&#125;"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">file</span><span class="params">(@PathVariable(<span class="string">"ymd"</span>)</span> String ymd, @<span class="title">PathVariable</span><span class="params">(<span class="string">"filename"</span>)</span> String filename,</span></span><br><span class="line"><span class="function">HttpServletResponse response) <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line"><span class="keyword">this</span>.responsefile(<span class="keyword">this</span>.fileUploadPath, ymd, filename, response);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 文件响应</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> filetype</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> ymd</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> filenamne</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> response</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">responsefile</span><span class="params">(String uploadPathPrefix, String ymd, String filenamne, HttpServletResponse response)</span></span></span><br><span class="line"><span class="function"><span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">response.setContentType(<span class="string">"application/octet-stream;charset=utf-8"</span>);</span><br><span class="line">response.setHeader(<span class="string">"content-disposition"</span>,</span><br><span class="line"><span class="string">"attachment;filename="</span> + java.net.URLEncoder.encode(filenamne, <span class="string">"utf-8"</span>));</span><br><span class="line">String fullPath = uploadPathPrefix + File.separator + ymd + File.separator + filenamne;</span><br><span class="line">;</span><br><span class="line">File downFile = <span class="keyword">new</span> File(fullPath);</span><br><span class="line"><span class="keyword">try</span> (OutputStream os = response.getOutputStream()) &#123;</span><br><span class="line"><span class="keyword">try</span> (BufferedInputStream in = <span class="keyword">new</span> BufferedInputStream(<span class="keyword">new</span> FileInputStream(downFile))) &#123;</span><br><span class="line"><span class="keyword">int</span> len;</span><br><span class="line"><span class="keyword">byte</span>[] buf = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">4096</span>];</span><br><span class="line"><span class="keyword">while</span> ((len = in.read(buf)) != -<span class="number">1</span>) &#123;</span><br><span class="line">os.write(buf, <span class="number">0</span>, len);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 在线资源浏览 分页获取</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> resourcepath</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> start</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> size</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> Map&lt;String, Object&gt; <span class="title">resources</span><span class="params">(String resourcepath, Integer start, Integer size)</span> </span>&#123;</span><br><span class="line">Map&lt;String, Object&gt; map = <span class="keyword">new</span> HashMap&lt;String, Object&gt;();</span><br><span class="line">map.put(<span class="string">"state"</span>, <span class="string">"SUCCESS"</span>);<span class="comment">// UEDI</span></span><br><span class="line">map.put(<span class="string">"start"</span>, start + <span class="string">""</span>);</span><br><span class="line">File file = <span class="keyword">new</span> File(resourcepath);</span><br><span class="line">File[] folders = file.listFiles();</span><br><span class="line">List&lt;File&gt; folderlist = Arrays.asList(folders);</span><br><span class="line">folderlist.sort((f1, f2) -&gt; &#123;</span><br><span class="line"><span class="keyword">return</span> f2.getName().compareTo(f1.getName());</span><br><span class="line">&#125;);</span><br><span class="line">List&lt;String&gt; listurl = <span class="keyword">new</span> ArrayList&lt;String&gt;(<span class="number">0</span>);</span><br><span class="line"><span class="keyword">int</span> end = folders.length;</span><br><span class="line"><span class="keyword">if</span> (end &gt; <span class="number">20</span>)</span><br><span class="line">end = <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; end; i++) &#123;</span><br><span class="line">File folder = folders[i];</span><br><span class="line">File[] files = folder.listFiles();</span><br><span class="line"><span class="keyword">for</span> (File f : files) &#123;</span><br><span class="line">String abspath = f.getAbsolutePath();</span><br><span class="line">String[] fs = abspath.split(<span class="string">"\\\\"</span>);</span><br><span class="line">String ymdpath = <span class="string">"/"</span> + fs[fs.length - <span class="number">4</span>] + <span class="string">"/"</span> + fs[fs.length - <span class="number">3</span>] + <span class="string">"/"</span> + fs[fs.length - <span class="number">2</span>] + <span class="string">"/"</span></span><br><span class="line">+ fs[fs.length - <span class="number">1</span>];</span><br><span class="line">listurl.add(ymdpath);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">map.put(<span class="string">"total"</span>, listurl.size() + <span class="string">""</span>);</span><br><span class="line"><span class="keyword">int</span> len = start + size;</span><br><span class="line"><span class="keyword">if</span> (len &gt;= listurl.size())</span><br><span class="line">len = listurl.size();</span><br><span class="line">listurl = listurl.subList(start, len);</span><br><span class="line">List&lt;Map&lt;String, String&gt;&gt; listmap = <span class="keyword">new</span> ArrayList&lt;Map&lt;String, String&gt;&gt;();</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; listurl.size(); i++) &#123;</span><br><span class="line">String url = listurl.get(i);</span><br><span class="line">Map&lt;String, String&gt; urlmap = <span class="keyword">new</span> HashMap&lt;String, String&gt;();</span><br><span class="line">urlmap.put(<span class="string">"url"</span>, url);</span><br><span class="line">listmap.add(urlmap);</span><br><span class="line">&#125;</span><br><span class="line">map.put(<span class="string">"list"</span>, listmap);</span><br><span class="line"><span class="keyword">return</span> map;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取配置</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> String <span class="title">config</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">BufferedReader reader = <span class="keyword">null</span>;</span><br><span class="line">StringBuilder builder = <span class="keyword">new</span> StringBuilder();</span><br><span class="line"><span class="comment">// 这里根据配置文件来判断 如果似乎部署jar 包的方式需要用到 classLoader 来加载配置文件</span></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">null</span> != active &amp;&amp; active.contains(<span class="string">"prod"</span>)) &#123;</span><br><span class="line">InputStream is = <span class="keyword">this</span>.getClass().getClassLoader().getResourceAsStream(<span class="string">"static/ueditor/jsp/config.json"</span>);</span><br><span class="line">reader = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(is));</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">reader = <span class="keyword">new</span> BufferedReader(</span><br><span class="line"><span class="keyword">new</span> FileReader(ResourceUtils.getFile(<span class="string">"classpath:static/ueditor/jsp/config.json"</span>)));</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (String line = <span class="string">""</span>; (line = reader.readLine()) != <span class="keyword">null</span>;) &#123;</span><br><span class="line">builder.append(line);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> builder.toString();</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 上传涂鸦图片</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> base64img</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> Map&lt;String, String&gt; <span class="title">uploadscrawl</span><span class="params">(String base64img)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">String suffix = <span class="string">".jpg"</span>; <span class="comment">// 默认jpg 文件</span></span><br><span class="line">String fileName = <span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyyMMddHHmmssSSS"</span>).format(<span class="keyword">new</span> Date()) + suffix;</span><br><span class="line">String fullPath = <span class="string">""</span>;</span><br><span class="line">String ymd = <span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyyMMdd"</span>).format(<span class="keyword">new</span> Date());</span><br><span class="line">File floder = <span class="keyword">new</span> File(<span class="keyword">this</span>.imageUploadPath + File.separator + ymd);</span><br><span class="line"><span class="keyword">if</span> (!floder.exists())</span><br><span class="line">floder.mkdirs();</span><br><span class="line">fullPath = floder.getPath() + File.separator + fileName;</span><br><span class="line"><span class="keyword">byte</span>[] bs = Base64Utils.decodeFromString(base64img);</span><br><span class="line"><span class="keyword">try</span> (OutputStream os = <span class="keyword">new</span> FileOutputStream(<span class="keyword">new</span> File(fullPath))) &#123;</span><br><span class="line">os.write(bs);</span><br><span class="line">os.flush();</span><br><span class="line">os.close();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> ueResult(<span class="string">"SUCCESS"</span>, String.format(<span class="string">"/ueditor/image/%s/%s"</span>, ymd, fileName), <span class="string">""</span>, <span class="string">""</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 上传文件</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> upfile   文件</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> filetype 文件类型 image | video | file</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> IllegalStateException</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> Map&lt;String, String&gt; <span class="title">upfile</span><span class="params">(MultipartFile upfile, String filetype, String uploadPathPrefix)</span></span></span><br><span class="line"><span class="function"><span class="keyword">throws</span> IllegalStateException, IOException </span>&#123;</span><br><span class="line">String suffix = upfile.getOriginalFilename().substring(upfile.getOriginalFilename().lastIndexOf(<span class="string">"."</span>));</span><br><span class="line">String fileName = <span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyyMMddHHmmssSSS"</span>).format(<span class="keyword">new</span> Date()) + suffix;</span><br><span class="line">String fullPath = <span class="string">""</span>;</span><br><span class="line">String ymd = <span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyyMMdd"</span>).format(<span class="keyword">new</span> Date());</span><br><span class="line">File floder = <span class="keyword">new</span> File(uploadPathPrefix + File.separator + ymd);</span><br><span class="line"><span class="keyword">if</span> (!floder.exists())</span><br><span class="line">floder.mkdirs();</span><br><span class="line">fullPath = floder.getPath() + File.separator + fileName;</span><br><span class="line">upfile.transferTo(<span class="keyword">new</span> File(fullPath));</span><br><span class="line">String vmpath = String.format(<span class="string">"/ueditor/%s/%s/%s"</span>, filetype, ymd, fileName);</span><br><span class="line"><span class="keyword">return</span> ueResult(<span class="string">"SUCCESS"</span>, vmpath, upfile.getName(), upfile.getOriginalFilename());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 返回 ueditor 参数</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> state</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> url</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> title</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> original</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> Map&lt;String, String&gt; <span class="title">ueResult</span><span class="params">(String state, String url, String title, String original)</span> </span>&#123;</span><br><span class="line">Map&lt;String, String&gt; map = <span class="keyword">new</span> HashMap&lt;String, String&gt;();</span><br><span class="line">map.put(<span class="string">"state"</span>, state);<span class="comment">// UEDITOR的规则:不为SUCCESS则显示state的内容</span></span><br><span class="line">map.put(<span class="string">"url"</span>, url); <span class="comment">// 能访问到你现在图片的路径</span></span><br><span class="line">map.put(<span class="string">"title"</span>, title);</span><br><span class="line">map.put(<span class="string">"original"</span>, original);</span><br><span class="line"><span class="keyword">return</span> map;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在application.yml 文件 新增文件保存路径</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">server:</span><br><span class="line">  port: 7001</span><br><span class="line"></span><br><span class="line">spring:</span><br><span class="line">  profiles:</span><br><span class="line">    active: dev # 配置启动方式   dev | prod </span><br><span class="line"></span><br><span class="line"># 配置ueditor 下载的位置</span><br><span class="line">ueditor:</span><br><span class="line">  imagepath: D:\\ueditor\\image\\</span><br><span class="line">  videopath: D:\\ueditor\\video\\</span><br><span class="line">  filepath: D:\\ueditor\\file\\</span><br></pre></td></tr></table></figure><h2 id="步骤三-测试"><a href="#步骤三-测试" class="headerlink" title="步骤三 测试"></a>步骤三 测试</h2><p>测试页面代码 </p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>富文本编辑器<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">id</span>=<span class="string">"container"</span> <span class="attr">name</span>=<span class="string">"content"</span> <span class="attr">type</span>=<span class="string">"text/plain"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"/ueditor/ueditor.config.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"/ueditor/ueditor.all.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span></span><br><span class="line"><span class="actionscript"><span class="keyword">var</span> ue = UE.getEditor(<span class="string">'container'</span>);</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>启动springboot 项目打开页面测试即可</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;说明&quot;&gt;&lt;a href=&quot;#说明&quot; class=&quot;headerlink&quot; title=&quot;说明&quot;&gt;&lt;/a&gt;说明&lt;/h1&gt;&lt;p&gt;springmvc 页面整合百度ueditor 富文本编辑器， 使用spring自带的上传组件，替换掉ueditor 自带的jsp 上传组件
      
    
    </summary>
    
    
    
      <category term="java" scheme="https://githubbycj.github.io/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>怎样创建hexo 的博客</title>
    <link href="https://githubbycj.github.io/2020/05/30/create-hexo-file/"/>
    <id>https://githubbycj.github.io/2020/05/30/create-hexo-file/</id>
    <published>2020-05-30T14:16:58.000Z</published>
    <updated>2020-05-30T14:26:46.788Z</updated>
    
    <content type="html"><![CDATA[<h1 id="步骤一"><a href="#步骤一" class="headerlink" title="步骤一"></a>步骤一</h1><p>打开命令行（我这里用的是windows 系统 用cmd 命令行） </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"这里输入一个文件的名称（一般用英文）"</span></span><br></pre></td></tr></table></figure><h1 id="步骤二"><a href="#步骤二" class="headerlink" title="步骤二"></a>步骤二</h1><p>在部署目录 <code>hexo/source/_posts/</code> 文件夹下找到刚刚的文件以<code>.md</code> 结尾，然后对它进行编辑(需要熟悉markdown 语法)</p><h1 id="步骤三"><a href="#步骤三" class="headerlink" title="步骤三"></a>步骤三</h1><p>编辑完成后 输入命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ hexo clean    <span class="comment">##清空缓存信息</span></span><br><span class="line">$ hexo generate <span class="comment">## 根据.md 格式的文件生成hexo 需要的html 静态网页</span></span><br><span class="line">$ hexo deploy   <span class="comment">## 发布到GitHub上</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;步骤一&quot;&gt;&lt;a href=&quot;#步骤一&quot; class=&quot;headerlink&quot; title=&quot;步骤一&quot;&gt;&lt;/a&gt;步骤一&lt;/h1&gt;&lt;p&gt;打开命令行（我这里用的是windows 系统 用cmd 命令行） &lt;/p&gt;
&lt;figure class=&quot;highlight bas
      
    
    </summary>
    
    
    
      <category term="Hexo" scheme="https://githubbycj.github.io/tags/Hexo/"/>
    
  </entry>
  
  <entry>
    <title>如何删除Hexo 发布博客</title>
    <link href="https://githubbycj.github.io/2020/05/30/delete-hexo-file/"/>
    <id>https://githubbycj.github.io/2020/05/30/delete-hexo-file/</id>
    <published>2020-05-30T14:06:09.000Z</published>
    <updated>2020-05-30T14:12:08.890Z</updated>
    
    <content type="html"><![CDATA[<h1 id="如何删除Hexo发布的文章"><a href="#如何删除Hexo发布的文章" class="headerlink" title="如何删除Hexo发布的文章"></a>如何删除Hexo发布的文章</h1><h2 id="进入hexo-的根目录"><a href="#进入hexo-的根目录" class="headerlink" title="进入hexo 的根目录"></a>进入hexo 的根目录</h2><p>然后进入<code>source/_posts</code> 文件夹下，找到需要删除的 .md文件删除</p><h2 id="执行命令"><a href="#执行命令" class="headerlink" title="执行命令"></a>执行命令</h2><p>重新生成发布就好</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span><span class="bash"> hexo clean</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> hexo generate</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> hexo deploy</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;如何删除Hexo发布的文章&quot;&gt;&lt;a href=&quot;#如何删除Hexo发布的文章&quot; class=&quot;headerlink&quot; title=&quot;如何删除Hexo发布的文章&quot;&gt;&lt;/a&gt;如何删除Hexo发布的文章&lt;/h1&gt;&lt;h2 id=&quot;进入hexo-的根目录&quot;&gt;&lt;a href=
      
    
    </summary>
    
    
    
      <category term="Hexo" scheme="https://githubbycj.github.io/tags/Hexo/"/>
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="https://githubbycj.github.io/2020/05/30/hello-world/"/>
    <id>https://githubbycj.github.io/2020/05/30/hello-world/</id>
    <published>2020-05-30T09:36:22.257Z</published>
    <updated>2020-05-30T09:36:22.257Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.
      
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>使用Nuget 安装 SQLite 小型数据库</title>
    <link href="https://githubbycj.github.io/2017/10/29/use-nuget-install-sqlite/"/>
    <id>https://githubbycj.github.io/2017/10/29/use-nuget-install-sqlite/</id>
    <published>2017-10-29T14:07:04.000Z</published>
    <updated>2020-05-30T15:41:13.456Z</updated>
    
    <content type="html"><![CDATA[<h1 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h1><p>记录一下 使用Nuget 安装 SQLite 小型数据库，并记录使用示例</p><h2 id="操作步骤如下"><a href="#操作步骤如下" class="headerlink" title="操作步骤如下"></a>操作步骤如下</h2><h3 id="第1步-下载安装方式"><a href="#第1步-下载安装方式" class="headerlink" title="第1步 下载安装方式"></a>第1步 下载安装方式</h3><ol><li>去nuget 直接下载<a href="https://www.nuget.org/packages?q=sqlite" target="_blank" rel="noopener">System.Data.SQLite.dll</a>然后引用</li><li>在VS 工具 –&gt; Nuget包管理器 –&gt; 程序包管理器控制台 安装dll<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 输入命令安装，也可以使用可视化工具安装</span></span><br><span class="line">Install-Package System.Data.SQLite -Version 1.0.105.2</span><br></pre></td></tr></table></figure><h3 id="第2步-新建Sqlite-数据库"><a href="#第2步-新建Sqlite-数据库" class="headerlink" title="第2步 新建Sqlite 数据库"></a>第2步 新建Sqlite 数据库</h3></li><li>使用CodeFirst 创建实体类 要求和表的字段一一对应 其他特性不列举<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;&#x2F; &lt;summary&gt;</span><br><span class="line">&#x2F;&#x2F;&#x2F; 实体类</span><br><span class="line">&#x2F;&#x2F;&#x2F; &lt;&#x2F;summary&gt;</span><br><span class="line">[Table(&quot;表名&quot;)]</span><br><span class="line">public class TestTable</span><br><span class="line">&#123;</span><br><span class="line">    [Key]</span><br><span class="line">    public String guid &#123; get; set; &#125;</span><br><span class="line"></span><br><span class="line">    public String field01 &#123;get; set;&#125;</span><br><span class="line"></span><br><span class="line">    public String field02 &#123;get; set;&#125;</span><br><span class="line">    &#x2F;&#x2F;。。。。</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>新建ConnectionString链接信息和DBContext类  <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- app.config 配置--&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 更改或添加providers --&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">providers</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">provider</span> <span class="attr">invariantName</span>=<span class="string">"System.Data.SqlClient"</span> <span class="attr">type</span>=<span class="string">"System.Data.Entity.SqlServer.SqlProviderServices, EntityFramework.SqlServer"</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">provider</span> <span class="attr">invariantName</span>=<span class="string">"System.Data.SQLite.EF6"</span> <span class="attr">type</span>=<span class="string">"System.Data.SQLite.EF6.SQLiteProviderServices, System.Data.SQLite.EF6"</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">provider</span> <span class="attr">invariantName</span>=<span class="string">"System.Data.SQLite"</span> <span class="attr">type</span>=<span class="string">"System.Data.SQLite.EF6.SQLiteProviderServices, System.Data.SQLite.EF6 "</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">providers</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 添加 connectionString  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">connectionStrings</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">add</span> <span class="attr">name</span>=<span class="string">"SQLiteDbContext"</span> <span class="attr">connectionString</span>=<span class="string">"Data Source=CarInfoDB.sqlite"</span> <span class="attr">providerName</span>=<span class="string">"System.Data.SQLite.EF6"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">connectionStrings</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ol><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//C# 代码配置</span></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">SQLiteDbContext</span> : <span class="title">DbContext</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// 可以使用 base 指定链接名 ， 也可以不指定但类名 要和链接名一致</span></span><br><span class="line">    <span class="comment">//public SQLiteDbContext() : base("SQLiteDbContext") &#123;</span></span><br><span class="line">    <span class="comment">//&#125;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> DbSet&lt;TestTable&gt; TestTableEntities &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="第3步-测试是否自动生成sqlite数据库"><a href="#第3步-测试是否自动生成sqlite数据库" class="headerlink" title="第3步 测试是否自动生成sqlite数据库"></a>第3步 测试是否自动生成sqlite数据库</h3><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">TestConn</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    SQLiteDbContext dbCxt = <span class="keyword">new</span> SQLiteDbContext();</span><br><span class="line">    <span class="keyword">var</span> res = dbCxt.TestTableEntities.Where(m =&gt; <span class="literal">true</span>).Count();</span><br><span class="line">    System.Console.WriteLine(res);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;说明&quot;&gt;&lt;a href=&quot;#说明&quot; class=&quot;headerlink&quot; title=&quot;说明&quot;&gt;&lt;/a&gt;说明&lt;/h1&gt;&lt;p&gt;记录一下 使用Nuget 安装 SQLite 小型数据库，并记录使用示例&lt;/p&gt;
&lt;h2 id=&quot;操作步骤如下&quot;&gt;&lt;a href=&quot;#操作步
      
    
    </summary>
    
    
    
      <category term="C#" scheme="https://githubbycj.github.io/tags/C/"/>
    
  </entry>
  
  <entry>
    <title>PL/SQL Developer 远程链接 Oracle 数据库</title>
    <link href="https://githubbycj.github.io/2016/12/12/plsql-Developer-connect-oracle/"/>
    <id>https://githubbycj.github.io/2016/12/12/plsql-Developer-connect-oracle/</id>
    <published>2016-12-12T04:13:23.000Z</published>
    <updated>2020-05-30T15:11:20.740Z</updated>
    
    <content type="html"><![CDATA[<h1 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h1><p>本机无需安装Oracle ， 只需要安装PL/SQL 和Oracle 驱动 即可远程链接Oracle 数据库 。</p><h2 id="第1步-下载工具"><a href="#第1步-下载工具" class="headerlink" title="第1步 下载工具"></a>第1步 下载工具</h2><ol><li><a href="https://www.allroundautomations.com/" target="_blank" rel="noopener">pl/sql 工具官网</a></li><li><a href="http://www.oracle.com/technetwork/topics/winx64soft-089540.html" target="_blank" rel="noopener">oracle 驱动包 官网</a><br><img src="/images/archives/20161212115533951.png" alt="alt oracle 驱动下载图"></li></ol><h2 id="第2步-先安装pl-sql"><a href="#第2步-先安装pl-sql" class="headerlink" title="第2步 先安装pl/sql"></a>第2步 先安装pl/sql</h2><p>安装过程 略</p><h2 id="第3步-解压oracle-驱动"><a href="#第3步-解压oracle-驱动" class="headerlink" title="第3步 解压oracle 驱动"></a>第3步 解压oracle 驱动</h2><p>3.1 解压 instantclient_12_1  放到指定目录<br>3.2 在instantclient_12_1 里面 新建文件夹 NETWORK/ADMIN/<br>3.3 再新建一个文件 tnsnames.ora （这里注意tnsnames.org 是固定写法）<br>文件内容配置oracle 链接信息<br><img src="/images/archives/20161212120245848.png" alt="alt tnsnames.org 文件配置"></p><h2 id="第4步-环境配置"><a href="#第4步-环境配置" class="headerlink" title="第4步 环境配置"></a>第4步 环境配置</h2><p>4.1 进入windows 环境变量配置<br>4.2 配置信息如下：<br>ORACLE_HOME = F:\instantclient_12_1 //指定的目录<br>TNS_ADMIN = F:\instantclient_12_1\NETWORK\ADMIN //配置 tsn文件路径<br>NLS_LANG = SIMPLIFIED CHINESE_CHINA.ZHS16GBK //配置编码<br>在path 最后添加 %ORACLE_HOME%  </p><h2 id="第5步-配置PL-SQL"><a href="#第5步-配置PL-SQL" class="headerlink" title="第5步 配置PL/SQL"></a>第5步 配置PL/SQL</h2><p>5.1 打开pl/sql 菜单 Tools –&gt; Preferences 如图：<br><img src="/images/archives/20161212121018344.png" alt="alt pl/sql 配置图"></p><h2 id="最后一步-重启PL-SQL"><a href="#最后一步-重启PL-SQL" class="headerlink" title="最后一步 重启PL/SQL"></a>最后一步 重启PL/SQL</h2><p>6.1 重启pl/sql 查看databases 是否有tnsnames 的链接 ，有的话就配置成功了</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;说明&quot;&gt;&lt;a href=&quot;#说明&quot; class=&quot;headerlink&quot; title=&quot;说明&quot;&gt;&lt;/a&gt;说明&lt;/h1&gt;&lt;p&gt;本机无需安装Oracle ， 只需要安装PL/SQL 和Oracle 驱动 即可远程链接Oracle 数据库 。&lt;/p&gt;
&lt;h2 id=&quot;第
      
    
    </summary>
    
    
    
      <category term="oracle" scheme="https://githubbycj.github.io/tags/oracle/"/>
    
  </entry>
  
</feed>
